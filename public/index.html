<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í–‰ì„± ì¶”ì²œê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      max-width: 600px;
      margin: auto;
    }
    label {
      display: block;
      font-weight: bold;
      margin-top: 1em;
    }
    select, button {
      width: 100%;
      padding: 0.5em;
      font-size: 1em;
      margin-top: 0.3em;
      box-sizing: border-box;
    }
    #result {
      margin-top: 2em;
      font-size: 1.1em;
      font-weight: bold;
    }
    #planetTable {
      margin-top: 2em;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9em;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f0f0f0;
    }
    .nav-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.5em;
      margin-top: 2em;
    }
    @media (max-width: 480px) {
      body { padding: 1em; }
      table, th, td { font-size: 0.8em; }
      h1 { font-size: 1.4em; }
    }
  </style>
</head>
<body>
  <h1>ë‚˜ì—ê²Œ ë§ëŠ” í–‰ì„± ì¶”ì²œ</h1>

  <label>1. í•˜ë£¨ ìˆ˜ë©´ ì‹œê°„ì€ í‰ê· ì ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ë˜ì‹œë‚˜ìš”?</label>
  <select id="sleepTime">
    <option>4ì‹œê°„ ì´í•˜</option>
    <option>4~8ì‹œê°„</option>
    <option>8~10ì‹œê°„</option>
    <option>10ì‹œê°„ ì´ìƒ</option>
  </select>

  <label>2. ë³´í†µ ëª‡ì‹œì— ì£¼ë¬´ì‹œë‚˜ìš”?</label>
  <select id="sleepStart">
    <option>22ì‹œ ì´ì „</option>
    <option>22~0ì‹œ</option>
    <option>0~2ì‹œ</option>
    <option>2ì‹œ ì´í›„</option>
  </select>

  <label>3. ë³´í†µ ëª‡ì‹œì— í™œë™ì„ ì‹œì‘í•˜ì‹œë‚˜ìš”?</label>
  <select id="activeStart">
    <option>2ì‹œê°„ ì´ìƒ ì „ì— ì¤€ë¹„</option>
    <option>2ì‹œê°„~1ì‹œê°„ ì „</option>
    <option>1ì‹œê°„~30ë¶„ ì „</option>
    <option>30ë¶„ ì´ì „</option>
  </select>

  <label>4. í•˜ë£¨ ì‹ì‚¬ íšŸìˆ˜ëŠ” ëª‡ë²ˆì¸ê°€ìš”?</label>
  <select id="mealCount">
    <option>1ë¼</option>
    <option>2ë¼</option>
    <option>3ë¼</option>
    <option>3ë¼ ì´ìƒ</option>
  </select>

  <button onclick="submitForm()">í–‰ì„± ì¶”ì²œ ë°›ê¸°</button>

  <div id="result"></div>

  <!-- ì¶”ì²œ í›„ì—ë§Œ ë³´ì´ëŠ” ë²„íŠ¼ -->
  <div id="resetSection" style="display:none; margin-top: 1em;">
    <button onclick="resetForm()">ğŸ” ë‹¤ì‹œ ì¶”ì²œ ë°›ê¸°</button>
  </div>

  <!-- í•­ìƒ ë³´ì´ëŠ” ë²„íŠ¼ -->
  <div class="nav-buttons">
    <button onclick="location.href='/stats'">ğŸ“Š ì¶”ì²œ í†µê³„ ë³´ê¸°</button>
    <button onclick="togglePlanetTable()">ğŸª ì¶”ì²œ í–‰ì„± ëª©ë¡ ë³´ê¸°</button>
    <button onclick="location.href='/responses'">ğŸ“„ ì‘ë‹µ ì „ì²´ ë³´ê¸°</button>
  </div>

  <!-- í–‰ì„± í‘œ -->
  <div id="planetTable" style="display:none;">
    <h2>ì¶”ì²œ í–‰ì„± ëª©ë¡ ë° ê¸°ì¤€í‘œ</h2>
    <table>
      <tr><th>ì ìˆ˜ êµ¬ê°„</th><th>ì¶”ì²œ í–‰ì„±</th><th>ì£¼ê¸° (ì‹œê°„)</th><th>ì„¤ëª…</th></tr>
      <tr><td>0~24</td><td>Hypothetical-X2</td><td>20</td><td>ê·¹ë‹¨ì ìœ¼ë¡œ ì§§ì€ ë¦¬ë“¬</td></tr>
      <tr><td>25~35</td><td>Hypothetical-X1</td><td>22</td><td>ì§§ì€ ìƒí™œ ë¦¬ë“¬</td></tr>
      <tr><td>36~45</td><td>TRAPPIST-1c</td><td>23.5</td><td>ì•½ê°„ ì§§ì€ ì£¼ê¸°</td></tr>
      <tr><td>46~55</td><td>Earth / TRAPPIST-1d</td><td>24</td><td>ì§€êµ¬ ìœ ì‚¬í˜•</td></tr>
      <tr><td>56~65</td><td>Mars</td><td>24.6</td><td>ì§€êµ¬ ë¹„ìŠ·</td></tr>
      <tr><td>66~75</td><td>Wolf 1061c</td><td>25</td><td>ì‚´ì§ ì¥ì£¼ê¸°í˜•</td></tr>
      <tr><td>76~85</td><td>Kepler-452b</td><td>26</td><td>ì¥ì£¼ê¸° ìƒí™œì</td></tr>
      <tr><td>86~90</td><td>Proxima b</td><td>27</td><td>ë” ê¸´ í™œë™ì</td></tr>
      <tr><td>91~98</td><td>Kepler-186f</td><td>33</td><td>ë§¤ìš° ê¸´ í™œë™ì</td></tr>
      <tr><td>99~100</td><td>Gliese 581 d</td><td>36</td><td>ê·¹ì¥ì£¼ê¸°í˜•</td></tr>
    </table>
  </div>

  <script>
    function togglePlanetTable() {
      const table = document.getElementById("planetTable");
      table.style.display = (table.style.display === "none") ? "block" : "none";
    }

    function getScore(sleepTime, sleepStart, activeStart, mealCount) {
      const scoreMap = {
        sleepTime: { "4ì‹œê°„ ì´í•˜": 0, "4~8ì‹œê°„": 8, "8~10ì‹œê°„": 16, "10ì‹œê°„ ì´ìƒ": 25 },
        sleepStart: { "22ì‹œ ì´ì „": 0, "22~0ì‹œ": 8, "0~2ì‹œ": 16, "2ì‹œ ì´í›„": 25 },
        activeStart: { "2ì‹œê°„ ì´ìƒ ì „ì— ì¤€ë¹„": 0, "2ì‹œê°„~1ì‹œê°„ ì „": 8, "1ì‹œê°„~30ë¶„ ì „": 16, "30ë¶„ ì´ì „": 25 },
        mealCount: { "1ë¼": 25, "2ë¼": 16, "3ë¼": 8, "3ë¼ ì´ìƒ": 0 }
      };
      return scoreMap.sleepTime[sleepTime] + scoreMap.sleepStart[sleepStart] + scoreMap.activeStart[activeStart] + scoreMap.mealCount[mealCount];
    }

    function getPlanetInfo(score) {
      const planets = [
        { min: 0, max: 24, name: "Hypothetical-X2 (20ì‹œê°„)", reason: "ê·¹ë‹¨ì ìœ¼ë¡œ ì§§ì€ ë¦¬ë“¬ì— ì í•©í•œ ìƒí™œ íŒ¨í„´ì…ë‹ˆë‹¤." },
        { min: 25, max: 35, name: "Hypothetical-X1 (22ì‹œê°„)", reason: "ì§§ì€ ìˆ˜ë©´ê³¼ ë¹ ë¥¸ ì‹œì‘ì´ ë§ì€ ë‹¨ì£¼ê¸°í˜•ì…ë‹ˆë‹¤." },
        { min: 36, max: 45, name: "TRAPPIST-1c (23.5ì‹œê°„)", reason: "ì§€êµ¬ë³´ë‹¤ ì‚´ì§ ì§§ì€ ì£¼ê¸°ì— ë” ì í•©í•œ ìƒí™œì…ë‹ˆë‹¤." },
        { min: 46, max: 55, name: "Earth / TRAPPIST-1d (24ì‹œê°„)", reason: "24ì‹œê°„ ì£¼ê¸°ì— ì˜ ë§ëŠ” ì•ˆì •ì ì¸ íŒ¨í„´ì…ë‹ˆë‹¤." },
        { min: 56, max: 65, name: "Mars (24.6ì‹œê°„)", reason: "ì¡°ê¸ˆ ë” ì—¬ìœ  ìˆëŠ” ìƒí™œ ë¦¬ë“¬ì„ ê°€ì§€ê³  ìˆì–´ìš”." },
        { min: 66, max: 75, name: "Wolf 1061c (25ì‹œê°„)", reason: "ê¸´ ìˆ˜ë©´, ì—¬ìœ ë¡œìš´ ì¤€ë¹„ì— ì í•©í•œ ì£¼ê¸°ì…ë‹ˆë‹¤." },
        { min: 76, max: 85, name: "Kepler-452b (26ì‹œê°„)", reason: "ì¥ì£¼ê¸° ìˆ˜ë©´ê³¼ ì—¬ìœ ë¡œìš´ ìƒí™œ íŒ¨í„´ì— ë§ìŠµë‹ˆë‹¤." },
        { min: 86, max: 90, name: "Proxima b (27ì‹œê°„)", reason: "ê¸´ ìˆ˜ë©´ê³¼ ëŠ¦ì€ ì·¨ì¹¨ì— ì í•©í•œ ë¦¬ë“¬ì´ì—ìš”." },
        { min: 91, max: 98, name: "Kepler-186f (33ì‹œê°„)", reason: "í•˜ë£¨ë¥¼ ê¸¸ê²Œ ì“°ëŠ” ëŒ€ì¥ì£¼ê¸°í˜• ìƒí™œì…ë‹ˆë‹¤." },
        { min: 99, max: 100, name: "Gliese 581 d (36ì‹œê°„)", reason: "ë§¤ìš° ê¸´ ìˆ˜ë©´ ë° ëŠ¦ì€ í™œë™ ì£¼ê¸°ì— ìµœì ì…ë‹ˆë‹¤." }
      ];
      return planets.find(p => score >= p.min && score <= p.max);
    }

    async function submitForm() {
      const sleepTime = document.getElementById("sleepTime").value;
      const sleepStart = document.getElementById("sleepStart").value;
      const activeStart = document.getElementById("activeStart").value;
      const mealCount = document.getElementById("mealCount").value;

      const score = getScore(sleepTime, sleepStart, activeStart, mealCount);
      const planetInfo = getPlanetInfo(score);

      document.getElementById("result").innerHTML =
        `ğŸŒ <strong>ì¶”ì²œ í–‰ì„±:</strong> ${planetInfo.name} (ì´ì  ${score}ì )<br>${planetInfo.reason}`;

      document.getElementById("resetSection").style.display = "block";

      await fetch("/submit", {
        method: "POST",
        body: JSON.stringify({ sleepTime, sleepStart, activeStart, mealCount, score, planet: planetInfo.name }),
        headers: { "Content-Type": "application/json" }
      });
    }

    function resetForm() {
      document.getElementById("sleepTime").selectedIndex = 0;
      document.getElementById("sleepStart").selectedIndex = 0;
      document.getElementById("activeStart").selectedIndex = 0;
      document.getElementById("mealCount").selectedIndex = 0;
      document.getElementById("result").innerText = "";
      document.getElementById("planetTable").style.display = "none";
      document.getElementById("resetSection").style.display = "none";
    }
  </script>
</body>
</html>
